(function(){"use strict";function e(e){e&&(this.status=e.status,this._parseHeaders(e.getAllResponseHeaders()),this.body=this.headers["Content-Type"]&&/application\/json/.test(this.headers["Content-Type"])?JSON.parse(e.responseText):e.responseText||"")}function t(e,t){t=t||{},this.url=e,this.headers=t.headers||{},this.method=t.method||"get"}function s(e){e=e||{},this.baseUrl="https://api.github.com",this.cacheNamespace=e.cacheNamespace||"ghapi"}if(e.prototype._parseHeaders=function(e){var t=e.split("\n"),s=/^(.*):(.*)$/,n={};return t.forEach(function(e){var t=e.replace(/\s/gm,""),r=s.exec(t);r&&r.length>=3&&(n[r[1]]=r[2])}),this.headers=n,this},t.prototype.send=function(t){var s=new XMLHttpRequest,n=this;return s.onload=function(){var r=new e(s);t.call(n,r)},s.open(this.method,this.url),Object.keys(this.headers).forEach(function(e){s.setRequestHeader(e,this.headers[e])},this),s.send(),this},t.get=function(e,s,n){return arguments.length<3&&(n=s),new t(e,{method:"get",headers:s||{}}).send(n)},s.prototype.repo=function(e,t){var n=this.baseUrl+"/repos/"+e;return this._requestOrReadCache(n,function(e){var n=new s.Repository({name:e.name,fullName:e.full_name,forks:e.forks_count,description:e.description,url:e.html_url,stars:e.stargazers_count,language:e.language});return t(n)}),this},s.prototype._requestOrReadCache=function(e,s){var n=this.cacheNamespace+"-"+e+"-",r=n+"etag",o=n+"content",a=localStorage.getItem(r);return a?(t.get(e,{"If-None-Match":a},function(t){return 304!==t.status?(window.localStorage.removeItem(r),window.localStorage.removeItem(o),this._requestOrReadCache(e,s)):s(JSON.parse(localStorage.getItem(o)))}.bind(this)),this):(t.get(e,function(e){return 200!==e.status?void s(null):(window.localStorage.setItem(r,e.headers.ETag),window.localStorage.setItem(o,JSON.stringify(e.body)),s(e.body))}),this)},s.Repository=function(e){e=e||{},this.name=e.name,this.fullName=e.fullName,this.description=e.description,this.forks=e.forks,this.language=e.language,this.url=e.url,this.stars=e.stars},"function"!=typeof skate)throw new Error(["Github-repo-element requires Skate.js! Make sure you either include","it in on your page, or use the bundled version. See","https://github.com/stevenschobert/github-repo-element#installing"].join(" "));if("function"!=typeof skateTemplateHtml)throw new Error(["Github-repo-element requires Skate.js Templating! Make sure you either include","it in on your page, or use the bundled version. See","https://github.com/stevenschobert/github-repo-element#installing"].join(" "));var n=['<a class="ghrepo-title" data-ghrepo="url">','<content select=".url">','<div data-ghrepo="fullName"></div>',"</content>","</a>",'<div class="ghrepo-description">','<content select=".description">','<div data-ghrepo="description"></div>',"</content>","</div>",'<div class="ghrepo-meta">','<content select=".meta">','<span class="ghrepo-stars">','<span data-ghrepo="stars"></span> stars',"</span>","&nbsp;&dash;&nbsp;",'<span class="ghrepo-forks">','<span data-ghrepo="forks"></span> forks',"</span>","</content>","</div>"].join(""),r=new s,o=skate("github-repo",{template:skateTemplateHtml(n),attributes:{src:function(e,t){r.repo(t.newValue,function(t){e.displayRepo(t)})}},prototype:{displayRepo:function(e){var t=this.querySelector('[data-ghrepo="url"]');t&&t.setAttribute("href",e.url),["name","fullName","description","watchers","forks","language","stars"].forEach(function(t){var s=this.querySelector('[data-ghrepo="'+t+'"]');s&&(s.innerHTML=e[t])},this)}}});!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.GithubRepoElement=t()}(this,function(){return o})}).bind("undefined"!=typeof window?window:{})();