(function(){"use strict";function e(e){e&&(this.status=e.status,this._parseHeaders(e.getAllResponseHeaders()),this.body=this.headers["Content-Type"]&&/application\/json/.test(this.headers["Content-Type"])?JSON.parse(e.responseText):e.responseText||"")}function t(e,t){t=t||{},this.url=e,this.headers=t.headers||{},this.method=t.method||"get"}function r(e){e=e||{},this.baseUrl="https://api.github.com",this.cacheNamespace=e.cacheNamespace||"ghapi"}e.prototype._parseHeaders=function(e){var t=e.split("\n"),r=/^(.*):(.*)$/,s={};return t.forEach(function(e){var t=e.replace(/\s/gm,""),n=r.exec(t);n&&n.length>=3&&(s[n[1]]=n[2])}),this.headers=s,this},t.prototype.send=function(t){var r=new XMLHttpRequest,s=this;return r.onload=function(){var n=new e(r);t.call(s,n)},r.open(this.method,this.url),Object.keys(this.headers).forEach(function(e){r.setRequestHeader(e,this.headers[e])},this),r.send(),this},t.get=function(e,r,s){return arguments.length<3&&(s=r),new t(e,{method:"get",headers:r||{}}).send(s)},r.prototype.repo=function(e,t){var s=this.baseUrl+"/repos/"+e;return this._requestOrReadCache(s,function(s){if(!s)throw new Error("No repository found for "+e+" !");return t(new r.Repository({name:s.name,fullName:s.full_name,forks:s.forks_count,description:s.description,url:s.html_url,stars:s.stargazers_count,language:s.language}))}),this},r.prototype._requestOrReadCache=function(e,r){var s=this.cacheNamespace+"-"+e+"-",n=s+"etag",o=s+"content",a=localStorage.getItem(n);return a?(t.get(e,{"If-None-Match":a},function(t){return 304!==t.status?(window.localStorage.removeItem(n),window.localStorage.removeItem(o),this._requestOrReadCache(e,r)):r(JSON.parse(localStorage.getItem(o)))}.bind(this)),this):(t.get(e,function(e){return 200!==e.status?void r(null):(window.localStorage.setItem(n,e.headers.ETag),window.localStorage.setItem(o,JSON.stringify(e.body)),r(e.body))}),this)},r.Repository=function(e){e=e||{},this.name=e.name,this.fullName=e.fullName,this.description=e.description,this.forks=e.forks,this.language=e.language,this.url=e.url,this.stars=e.stars},function(e,t){"function"==typeof define&&define.amd?define(["skate","template-html"],t):"object"==typeof exports?module.exports=t(require("skate"),require("template-html")):e.GithubRepoElement=t(e.skate,e.skateTemplateHtml)}(this,function(e,t){if("function"!=typeof e)throw new Error(["Github-repo-element requires Skate.js! Make sure you either include","it in on your page, or use the bundled version. See","https://github.com/stevenschobert/github-repo-element#installing"].join(" "));if("function"!=typeof t)throw new Error(["Github-repo-element requires Skate.js Templating! Make sure you either include","it in on your page, or use the bundled version. See","https://github.com/stevenschobert/github-repo-element#installing"].join(" "));var s=['<a class="ghrepo-title" data-ghrepo="url">','<content select=".url">','<div data-ghrepo="fullName"></div>',"</content>","</a>",'<div class="ghrepo-description">','<content select=".description">','<div data-ghrepo="description"></div>',"</content>","</div>",'<div class="ghrepo-meta">','<content select=".meta">','<span class="ghrepo-stars">','<span data-ghrepo="stars"></span> stars',"</span>","&nbsp;&dash;&nbsp;",'<span class="ghrepo-forks">','<span data-ghrepo="forks"></span> forks',"</span>","</content>","</div>"].join(""),n=new r,o=e("github-repo",{template:t(s),attributes:{src:function(e,t){n.repo(t.newValue,function(r){if(!r)throw new Error('No repository found for "'+t.newValue+'"!');e.displayRepo(r)})}},prototype:{displayRepo:function(e){var t=this.querySelector('[data-ghrepo="url"]');t&&t.setAttribute("href",e.url),["name","fullName","description","watchers","forks","language","stars"].forEach(function(t){var r=this.querySelector('[data-ghrepo="'+t+'"]');r&&(r.innerHTML=e[t])},this)}}});return o})}).bind("undefined"!=typeof window?window:{})();