(function(){"use strict";function e(e){e&&(this.status=e.status,this._parseHeaders(e.getAllResponseHeaders()),this.body=this.headers["Content-Type"]&&/application\/json/.test(this.headers["Content-Type"])?JSON.parse(e.responseText):e.responseText||"")}function t(e,t){t=t||{},this.url=e,this.headers=t.headers||{},this.method=t.method||"get"}function s(e){e=e||{},this.baseUrl="https://api.github.com",this.cacheNamespace=e.cacheNamespace||"ghapi"}e.prototype._parseHeaders=function(e){var t=e.split("\n"),s=/^(.*):(.*)$/,r={};return t.forEach(function(e){var t=e.replace(/\s/gm,""),n=s.exec(t);n&&n.length>=3&&(r[n[1]]=n[2])}),this.headers=r,this},t.prototype.send=function(t){var s=new XMLHttpRequest,r=this;return s.onload=function(){var n=new e(s);t.call(r,n)},s.open(this.method,this.url),Object.keys(this.headers).forEach(function(e){s.setRequestHeader(e,this.headers[e])},this),s.send(),this},t.get=function(e,s,r){return arguments.length<3&&(r=s),new t(e,{method:"get",headers:s||{}}).send(r)},s.prototype.repo=function(e,t){var r=this.baseUrl+"/repos/"+e;return this._requestOrReadCache(r,function(r){if(!r)throw new Error("No repository found for "+e+" !");return t(new s.Repository({name:r.name,fullName:r.full_name,forks:r.forks_count,description:r.description,url:r.html_url,stars:r.stargazers_count,language:r.language}))}),this},s.prototype._requestOrReadCache=function(e,s){var r=this.cacheNamespace+"-"+e+"-",n=r+"etag",o=r+"content",a=localStorage.getItem(n);return a?(t.get(e,{"If-None-Match":a},function(t){return 304!==t.status?(window.localStorage.removeItem(n),window.localStorage.removeItem(o),this._requestOrReadCache(e,s)):s(JSON.parse(localStorage.getItem(o)))}.bind(this)),this):(t.get(e,function(e){return 200!==e.status?void s(null):(window.localStorage.setItem(n,e.headers.ETag),window.localStorage.setItem(o,JSON.stringify(e.body)),s(e.body))}),this)},s.Repository=function(e){e=e||{},this.name=e.name,this.fullName=e.fullName,this.description=e.description,this.forks=e.forks,this.language=e.language,this.url=e.url,this.stars=e.stars},function(e,t){"function"==typeof define&&define.amd?define(["skate","template-html"],t):"object"==typeof exports?module.exports=t(require("skate"),require("template-html")):e.GithubRepoElement=t(e.skate,e.skateTemplateHtml)}(this,function(e,t){if("function"!=typeof e)throw new Error(["Github-repo-element requires Skate.js! Make sure you either include","it in on your page, or use the bundled version. See","https://github.com/stevenschobert/github-repo-element#installing"].join(" "));if("function"!=typeof t)throw new Error(["Github-repo-element requires Skate.js Templating! Make sure you either include","it in on your page, or use the bundled version. See","https://github.com/stevenschobert/github-repo-element#installing"].join(" "));var r=['<a class="ghrepo-title" data-ghrepo="url">','<content select=".url">','<div data-ghrepo="fullName"></div>',"</content>","</a>",'<div class="ghrepo-description">','<content select=".description">','<div data-ghrepo="description"></div>',"</content>","</div>",'<div class="ghrepo-meta">','<content select=".meta">','<span class="ghrepo-stars">','<span data-ghrepo="stars"></span> stars',"</span>","&nbsp;&dash;&nbsp;",'<span class="ghrepo-forks">','<span data-ghrepo="forks"></span> forks',"</span>","</content>","</div>"].join(""),n=new s,o=e("github-repo",{template:t(r),attributes:{src:function(e,t){n.repo(t.newValue,function(t){e.displayRepo(t)})}},prototype:{displayRepo:function(e){var t=this.querySelector('[data-ghrepo="url"]');t&&t.setAttribute("href",e.url),["name","fullName","description","watchers","forks","language","stars"].forEach(function(t){var s=this.querySelector('[data-ghrepo="'+t+'"]');s&&(s.innerHTML=e[t])},this)}}});return o})}).bind("undefined"!=typeof window?window:{})();